#!/usr/bin/env ruby

$:.unshift(File.expand_path('../../lib', __FILE__))
$:.unshift(File.expand_path('../../../procodile/lib', __FILE__))

command = ARGV[0]

require 'bask'

case command
when 'run'
  require 'bask/server'
  server = Bask::Server.new
  server.run
when 'config'
  require 'bask'
  Bask.config.apps.values.each do |app|
    puts "App exists: #{app.present?}"
    puts "Path: #{app.path}"
    puts "Supervisor running: #{app.supervisor_running?}"
    puts "Status: #{app.supervisor_status}"
    puts "Process status: #{app.process_status}"
    puts "Process running: #{app.process_running?}"
  end
end
